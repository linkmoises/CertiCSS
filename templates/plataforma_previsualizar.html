<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>{{ evento.nombre }} - Aula Digital - CertiCSS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- favicons -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='assets/favicons/favicon-96x96.png') }}"
        sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='assets/favicons/favicon.svg') }}" />
    <link rel="apple-touch-icon" sizes="180x180"
        href="{{ url_for('static', filename='assets/favicons/apple-touch-icon.png') }}" />
    <meta name="apple-mobile-web-app-title" content="CertiCSS" />
    <link rel="manifest" href="{{ url_for('static', filename='assets/favicons/site.webmanifest') }}" />
    {% if UMAMI_URL %}
    {{ UMAMI_URL | safe }}
    {% endif %}
</head>

<body class="bg-gray-50 dark:bg-neutral-900">

    <!-- ========== MAIN CONTENT ========== -->
    <main id="content">

        <!-- Card -->
        <div class="max-w-[90rem] px-8 pt-8 sm:px-6 lg:px-8 lg:pt-8 mx-auto">
            <!-- Grid -->
            <div class="bg-white grid sm:grid-cols-2 border border-gray-200 rounded-xl lg:grid-cols-12">

                <div class="sm:order-1 lg:col-span-3 border-r border-gray-200">
                    <div class="relative pt-[100%] sm:pt-[100%]">
                        {% if evento.afiche_750 %}
                        <img class="size-full absolute top-0 start-0 object-cover rounded-l-xl"
                            src="{{ BASE_URL }}{{ evento.afiche_750 }}" alt="{{ evento.nombre }}">
                        {% else %}
                        <img class="size-full absolute top-0 start-0 object-cover rounded-l-xl"
                            src="{{ url_for('static', filename='assets/afiche-generico.jpg') }}"
                            alt="{{ evento.nombre }}">
                        {% endif %}
                    </div>
                    <div class="m-4">
                        <h2 class="font-bold text-gray-800 mb-2">{{ evento.nombre }}</h2>
                        <p class="text-sm text-gray-500">{{ evento.descripcion }}</p>
                    </div>
                    <div class="m-6 border border-red-200 rounded-lg p-2 bg-red-100">
                        <p class="text-lg font-bold text-red-800">隆Previsualizaci贸n!</p>
                        <p class="text-sm text-red-800">Esta es una previsualizaci贸n, no puedes interactuar con los
                            contenidos.</p>
                    </div>
                </div>
                <!-- End Col -->

                <div class="sm:order-2 lg:col-span-9">

                    <div class="m-8">

                        {% if contenido_actual %}

                        {% if contenido_actual.tipo == 'video' %}
                        <h2 class="text-xl font-bold text-gray-800 pb-4">{{ contenido_actual.titulo }} (Previsualizaci贸n)</h2>
                        <div style="display: flex; justify-content: center;">
                            <iframe style="aspect-ratio: 16 / 9; width: 100% !important;"
                                src="{{ contenido_actual.url_video }}" title="{{ contenido_actual.titulo }}"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                        </div>
                        <br />
                        {% elif contenido_actual.tipo == 'texto' %}
                        <div class="prose text-gray-600 w-full text-sm !max-w-none">
                            {{ contenido_actual.contenido_texto | safe }}
                        </div>
                        {% elif contenido_actual.tipo == 'documento' %}
                        <h2 class="text-xl font-bold text-gray-800 pb-4">{{ contenido_actual.titulo }} (Previsualizaci贸n)</h2>
                        <div id="pdf-viewer" class="border" style="height: 80vh"></div>
                        <script type="module">
                        import EmbedPDF from 'https://cdn.jsdelivr.net/npm/@embedpdf/snippet@2/dist/embedpdf.js';
                        
                        EmbedPDF.init({
                            type: 'container',
                            target: document.getElementById('pdf-viewer'),
                            src: '{{ url_for('static', filename='uploads/' + contenido_actual.documento) }}',
                            theme: { preference: 'light' },
                            disabledCategories: ['annotation', 'print', 'redaction'],
                            i18n: {
                                defaultLocale: 'es',
                                fallbackLocale: 'en'
                            }
                        });
                        </script>
                        <div class="my-4">
                            <a class="mt-3 w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-indigo-900 text-white hover:bg-blue-800 focus:outline-none focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none hover:shadow-md hover:-translate-y-[1px] transition-all duration-200 ease-out" href="{{ url_for('static', filename='uploads/' + contenido_actual.documento) }}" target="_blank">
                                 Descargar Documento
                            </a>
                        </div>
                        {% elif contenido_actual.tipo == 'examen' %}
                        <div class="mx-auto">
                            <h2 class="text-2xl font-bold mb-4">Examen (Previsualizaci贸n)</h2>
                            <div class="space-y-6">
                                {% for pregunta in preguntas %}
                                {% set pregunta_idx = loop.index0 %}
                                <div class="mb-6 border-b pb-4">
                                    <div class="mb-2 font-semibold">{{ loop.index }}. {{ pregunta.pregunta_html|safe }}
                                    </div>
                                    <!-- Im谩genes de la pregunta -->
                                    {% if pregunta.imagenes %}
                                    <div class="my-2 max-w-md">
                                        {% for imagen in pregunta.imagenes %}
                                        <a href="{{ url_for('static', filename='uploads/' + imagen) }}">
                                            <img src="{{ url_for('static', filename='uploads/' + imagen) }}" alt="Imagen" class="max-w-md h-auto border p-1 m-1">
                                        </a>
                                        <p class="text-sm text-center italic text-gray-400">(Click para ver tama帽o completo)</p>
                                        {% endfor %}
                                    </div>
                                    {% endif %}
                                    <div class="space-y-2">
                                        {% if pregunta.tipo == 'seleccion_simple' or pregunta.tipo == 'verdadero_falso'
                                        %}
                                        {% for opcion in pregunta.opciones %}
                                        <label class="flex items-center gap-2">
                                            <input type="radio" disabled name="resp_{{ pregunta_idx }}">
                                            {{ opcion.texto }}
                                            {% if opcion.imagen %}
                                            <img src="{{ url_for('static', filename='uploads/' + opcion.imagen) }}" alt="img"
                                                class="h-8 inline">
                                            {% endif %}
                                        </label>
                                        {% endfor %}
                                        {% elif pregunta.tipo == 'seleccion_multiple' %}
                                        {% for opcion in pregunta.opciones %}
                                        <label class="flex items-center gap-2">
                                            <input type="checkbox" disabled name="resp_{{ pregunta_idx }}">
                                            {{ opcion.texto }}
                                            {% if opcion.imagen %}
                                            <img src="{{ url_for('static', filename='uploads/' + opcion.imagen) }}" alt="img"
                                                class="h-8 inline">
                                            {% endif %}
                                        </label>
                                        {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                        {% else %}
                        <p>Selecciona un recurso del listado.</p>
                        {% endif %}

                        <div class="mt-6 flex justify-between">
                            <button disabled
                                class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m15 18-6-6 6-6" />
                                </svg>
                                Anterior
                            </button>

                            <button disabled
                                class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m9 18 6-6-6-6"></path>
                                </svg>
                                Siguiente
                            </button>
                        </div>

                    </div>
                </div>
                <!-- End Col -->

            </div>
            <!-- End Grid -->

        </div>
        <!-- End Card -->

    </main>

    <footer class="mt-auto w-full max-w-[85rem] px-4 sm:px-6 lg:px-8 mx-auto">
        <div class="text-center text-xs text-gray-500 my-8">
            <p>Este evento es avalado por DENADOI y potenciado por la plataforma CertiCSS.</p>
        </div>
    </footer>


</body>

</html>